{% extends 'base.html' %} {% block content %}
<form action="/" id="login-form" method="POST" class="buttons">
  <h3>Login</h3>
  <div>
    <label>Email:</label>
    <input type="email" placeholder="Enter your email" name="email" />
  </div>
  <div>
    <label>Password:</label>
    <input type="password" placeholder="Enter your password" name="password" />
  </div>
  <button type="submit" name="login" class="create-btn">Login</button>
  <a href="{{ url_for('signup') }}" style="float: right">Create Account</a>
  {% if error %}
  <ul>
    <li>{{ error }}</li>
  </ul>
  {% endif %}
</form>

<script src="https://www.gstatic.com/firebasejs/5.6.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.6.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.6.0/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.6.0/firebase-storage.js"></script>
<script src="static/firebase-init.js"></script>
<script>
  // Login
  const loginForm = document.querySelector("#login-form");
  loginForm.addEventListener("submit", (e) => {
    e.preventDefault();

    // Get User Info
    const email = loginForm["email"].value;
    const password = loginForm["password"].value;

    // Login the User
    auth
      .signInWithEmailAndPassword(email, password)
      .then((cred) => {
        loginForm.reset();
        localStorage.setItem("isLoggedIn", true); // Store login status as boolean
        window.location.replace("{{ url_for('home') }}");
      })
      .catch((error) => {
        console.log(error.message);
      });
  });
</script>
{% endblock %}
